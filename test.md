                                                                                                                                                                                                                                       
 0) One-time prerequisites (laptop)                                                                                                                                                                                                     
                                                                                                                                                                                                                                        
 - Install:                                                                                                                                                                                                                             
     - node + pnpm                                                                                                                                                                                                                      
     - Android SDK + adb                                                                                                                                                                                                                
     - pi CLI                                                                                                                                                                                                                           
     - Tailscale                                                                                                                                                                                                                        
                                                                                                                                                                                                                                        
 ```bash                                                                                                                                                                                                                                
   npm install -g @mariozechner/pi-coding-agent                                                                                                                                                                                         
   pi --version                                                                                                                                                                                                                         
   pnpm --version                                                                                                                                                                                                                       
   adb version                                                                                                                                                                                                                          
   tailscale version                                                                                                                                                                                                                    
 ```                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                        
 ────────────────────────────────────────────────────────────────────────────────                                                                                                                                                       
                                                                                                                                                                                                                                        
 1) Tailscale setup (laptop + phone)                                                                                                                                                                                                    
                                                                                                                                                                                                                                        
 ### Laptop                                                                                                                                                                                                                             
                                                                                                                                                                                                                                        
 1. Log in to Tailscale.                                                                                                                                                                                                                
 2. Confirm it’s connected:                                                                                                                                                                                                             
 ```bash                                                                                                                                                                                                                                
   tailscale status                                                                                                                                                                                                                     
   tailscale ip -4                                                                                                                                                                                                                      
 ```                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                        
 Save the IPv4 (usually 100.x.x.x).                                                                                                                                                                                                     
                                                                                                                                                                                                                                        
 ### Phone                                                                                                                                                                                                                              
                                                                                                                                                                                                                                        
 1. Install Tailscale app.                                                                                                                                                                                                              
 2. Log in to the same tailnet.                                                                                                                                                                                                         
 3. Ensure VPN is active.                                                                                                                                                                                                               
                                                                                                                                                                                                                                        
 ────────────────────────────────────────────────────────────────────────────────                                                                                                                                                       
                                                                                                                                                                                                                                        
 2) Start Pi Bridge on laptop                                                                                                                                                                                                           
                                                                                                                                                                                                                                        
 From repo root:                                                                                                                                                                                                                        
                                                                                                                                                                                                                                        
 ```bash                                                                                                                                                                                                                                
   cd bridge                                                                                                                                                                                                                            
   pnpm install                                                                                                                                                                                                                         
 ```                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                        
 Create bridge/.env:                                                                                                                                                                                                                    
                                                                                                                                                                                                                                        
 ```env                                                                                                                                                                                                                                 
   BRIDGE_AUTH_TOKEN=your-strong-token                                                                                                                                                                                                  
   BRIDGE_HOST=0.0.0.0                                                                                                                                                                                                                  
   BRIDGE_PORT=8787                                                                                                                                                                                                                     
   BRIDGE_LOG_LEVEL=info                                                                                                                                                                                                                
   BRIDGE_PROCESS_IDLE_TTL_MS=300000                                                                                                                                                                                                    
   BRIDGE_RECONNECT_GRACE_MS=30000                                                                                                                                                                                                      
   BRIDGE_SESSION_DIR=/home/<you>/.pi/agent/sessions                                                                                                                                                                                    
 ```                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                        
 │ BRIDGE_AUTH_TOKEN is required.                                                                                                                                                                                                       
                                                                                                                                                                                                                                        
 Run bridge:                                                                                                                                                                                                                            
                                                                                                                                                                                                                                        
 ```bash                                                                                                                                                                                                                                
   pnpm start                                                                                                                                                                                                                           
 ```                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                        
 Verify health locally:                                                                                                                                                                                                                 
                                                                                                                                                                                                                                        
 ```bash                                                                                                                                                                                                                                
   curl http://127.0.0.1:8787/health                                                                                                                                                                                                    
 ```                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                        
 Verify from Tailnet (replace IP):                                                                                                                                                                                                      
                                                                                                                                                                                                                                        
 ```bash                                                                                                                                                                                                                                
   curl http://100.x.x.x:8787/health                                                                                                                                                                                                    
 ```                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                        
 ────────────────────────────────────────────────────────────────────────────────                                                                                                                                                       
                                                                                                                                                                                                                                        
 3) Ensure you actually have Pi sessions                                                                                                                                                                                                
                                                                                                                                                                                                                                        
 The mobile app lists files under ~/.pi/agent/sessions.                                                                                                                                                                                 
                                                                                                                                                                                                                                        
 Create at least one session quickly:                                                                                                                                                                                                   
                                                                                                                                                                                                                                        
 ```bash                                                                                                                                                                                                                                
   cd /path/to/any/project                                                                                                                                                                                                              
   pi                                                                                                                                                                                                                                   
   # send 1 prompt, then exit                                                                                                                                                                                                           
 ```                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                        
 ────────────────────────────────────────────────────────────────────────────────                                                                                                                                                       
                                                                                                                                                                                                                                        
 4) Wireless debugging + install APK on phone                                                                                                                                                                                           
                                                                                                                                                                                                                                        
 Option A (recommended, Android 11+): Wireless debugging pairing                                                                                                                                                                        
                                                                                                                                                                                                                                        
 On phone:                                                                                                                                                                                                                              
 - Developer options → Wireless debugging ON                                                                                                                                                                                            
 - Tap “Pair device with pairing code”                                                                                                                                                                                                  
                                                                                                                                                                                                                                        
 On laptop:                                                                                                                                                                                                                             
                                                                                                                                                                                                                                        
 ```bash                                                                                                                                                                                                                                
   adb pair <PHONE_IP>:<PAIR_PORT>                                                                                                                                                                                                      
   # enter pairing code                                                                                                                                                                                                                 
   adb connect <PHONE_IP>:<ADB_PORT>                                                                                                                                                                                                    
   adb devices                                                                                                                                                                                                                          
 ```                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                        
 Install app:                                                                                                                                                                                                                           
                                                                                                                                                                                                                                        
 ```bash                                                                                                                                                                                                                                
   ./gradlew :app:installDebug                                                                                                                                                                                                          
 ```                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                        
 (or)                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                        
 ```bash                                                                                                                                                                                                                                
   ./gradlew :app:assembleDebug                                                                                                                                                                                                         
   adb install -r app/build/outputs/apk/debug/app-debug.apk                                                                                                                                                                             
 ```                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                        
 Option B (classic USB once, then Wi-Fi)                                                                                                                                                                                                
                                                                                                                                                                                                                                        
 ```bash                                                                                                                                                                                                                                
   adb devices                                                                                                                                                                                                                          
   adb tcpip 5555                                                                                                                                                                                                                       
   adb connect <PHONE_IP>:5555                                                                                                                                                                                                          
   adb devices                                                                                                                                                                                                                          
   ./gradlew :app:installDebug                                                                                                                                                                                                          
 ```                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                        
 ────────────────────────────────────────────────────────────────────────────────                                                                                                                                                       
                                                                                                                                                                                                                                        
 5) Configure host in app (phone)                                                                                                                                                                                                       
                                                                                                                                                                                                                                        
 In app → Hosts:                                                                                                                                                                                                                        
 - Name: anything                                                                                                                                                                                                                       
 - Host: laptop Tailscale IP (100.x.x.x)                                                                                                                                                                                                
 - Port: 8787                                                                                                                                                                                                                           
 - Use TLS: OFF (unless you intentionally set up TLS reverse proxy)                                                                                                                                                                     
 - Token: same BRIDGE_AUTH_TOKEN                                                                                                                                                                                                        
                                                                                                                                                                                                                                        
 Tap Test connection (if available).                                                                                                                                                                                                    
 Then go Sessions tab and resume a session.                                                                                                                                                                                             
                                                                                                                                                                                                                                        
 ────────────────────────────────────────────────────────────────────────────────                                                                                                                                                       
                                                                                                                                                                                                                                        
 6) Daily dev loop                                                                                                                                                                                                                      
                                                                                                                                                                                                                                        
 Terminal 1 (bridge):                                                                                                                                                                                                                   
                                                                                                                                                                                                                                        
 ```bash                                                                                                                                                                                                                                
   cd bridge                                                                                                                                                                                                                            
   pnpm start                                                                                                                                                                                                                           
 ```                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                        
 Terminal 2 (app deploy):                                                                                                                                                                                                               
                                                                                                                                                                                                                                        
 ```bash                                                                                                                                                                                                                                
   ./gradlew :app:installDebug                                                                                                                                                                                                          
 ```                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                        
 Terminal 3 (logs):                                                                                                                                                                                                                     
                                                                                                                                                                                                                                        
 ```bash                                                                                                                                                                                                                                
   adb logcat | grep -E "PiMobile|PerfMetrics|FrameMetrics"                                                                                                                                                                             
 ```                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                        
 ────────────────────────────────────────────────────────────────────────────────                                                                                                                                                       
                                                                                                                                                                                                                                        
 7) Quick troubleshooting                                                                                                                                                                                                               
                                                                                                                                                                                                                                        
 - Can’t connect from phone                                                                                                                                                                                                             
     - Tailscale active on both devices                                                                                                                                                                                                 
     - curl http://100.x.x.x:8787/health works                                                                                                                                                                                          
     - token matches exactly                                                                                                                                                                                                            
 - No sessions                                                                                                                                                                                                                          
     - check ~/.pi/agent/sessions exists and has files                                                                                                                                                                                  
 - App installed but not updating                                                                                                                                                                                                       
     - use adb install -r ... or :app:installDebug                                                                                                                                                                                      
 - Wireless ADB drops                                                                                                                                                                                                                   
     - reconnect with adb connect ...     